<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Inicio de Sesión Evalix</title>

<!-- Estilos -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;600&family=Orbitron:wght@600&display=swap" rel="stylesheet" />

<style>
* { box-sizing: border-box; }

:root {
  --azul-oscuro: #0d47a1;
}

/* === Fondo general sin scroll === */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden; /* elimina scroll */
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  background: linear-gradient(180deg, #039be5 0%, #b3e5fc 100%);
  font-family: 'Exo 2', sans-serif;
  position: relative;
}

/* Fondo mosaico tipo marca de agua */
body::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: 0;
  background-image: url("assets/imagenes/evalix.png");
  background-repeat: repeat;
  background-position: center;
  background-size: 220px;
  opacity: 0.18;
  pointer-events: none;
  animation: sutilMovimiento 40s linear infinite;
}
@keyframes sutilMovimiento {
  0% { background-position: 0 0; }
  50% { background-position: 300px 200px; }
  100% { background-position: 0 0; }
}

/* Header/logo */
.logo-top {
  position: relative;
  z-index: 2;
  margin-top: 18px;
  display: flex;
  justify-content: center;
  width: 100%;
}
.logo-top img {
  width: clamp(120px, 20vw, 170px);
  transition: transform 0.3s ease;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.15));
}
.logo-top img:hover { transform: scale(1.03); }

/* Main sin scroll visible */
main {
  position: relative;
  z-index: 2;
  flex: 1 0 auto;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px;
}

/* Tarjeta de login */
.card-login {
  background: white;
  border-radius: 18px;
  padding: 18px 20px;
  width: min(92vw, 380px);
  max-height: 395px; /* fija tamaño estable */
  overflow: hidden; /* evita scroll interno */
  box-shadow: 0 8px 28px rgba(0, 0, 0, 0.23);
}

/* Títulos */
h2 {
  font-family: 'Orbitron', sans-serif;
  color: var(--azul-oscuro);
  text-align: center;
  font-size: 1.5rem;
  margin: 6px 0 12px;
  letter-spacing: 0.4px;
}

label {
  font-weight: 600;
  font-size: 0.95rem;
}

.form-control, .form-select {
  border-radius: 10px;
  font-size: 0.95rem;
  padding: 8px 10px;
  border: 1px solid #bbdefb;
}

/* Botón */
.btn-primary {
  background: var(--azul-oscuro);
  border: none;
  border-radius: 10px;
  font-size: 0.95rem;
  padding: 10px;
  margin-top: 8px;
  box-shadow: 0 4px 10px rgba(13,71,161,0.18);
  transition: transform .18s ease, background .18s ease;
  width: 100%;
}
.btn-primary:hover {
  background: #155aa8;
  transform: translateY(-2px);
}

/* Enlaces */
a {
  color: var(--azul-oscuro);
  text-decoration: none;
  font-size: 0.87rem;
}
a:hover { text-decoration: underline; }

/* Footer siempre visible */
footer {
  position: relative;
  bottom: 0;
  z-index: 2;
  text-align: center;
  color: #033b69;
  font-size: 0.85rem;
  padding: 8px 12px;
  width: 100%;
  backdrop-filter: blur(2px);
  margin-top: auto;
}

footer a {
  color: #033b69;
  text-decoration: underline;
}

/* Responsive */
@media (max-width: 520px) {
  .card-login { width: 94vw; padding: 14px; }
  h2 { font-size: 1.3rem; }
  footer { font-size: 0.78rem; padding: 6px 10px; }
}
</style>
</head>

<body>
  <div class="logo-top">
    <a href="index.html"><img src="assets/imagenes/evalix.png" alt="Evalix Logo"></a>
  </div>

  <main>
    <div class="card-login" role="region" aria-label="Formulario de inicio de sesión">
      <h2>Inicio de Sesión</h2>
      <form id="loginForm" novalidate>
        <div class="mb-3">
          <label for="tipoCliente" class="form-label">Tipo de Cliente:</label>
          <select id="tipoCliente" class="form-select" required></select>
          <div class="invalid-feedback">Selecciona un tipo de cliente.</div>
        </div>
        <div class="mb-3">
          <label for="emailLogin" class="form-label">Correo Electrónico:</label>
          <input type="email" id="emailLogin" class="form-control" required>
          <div class="invalid-feedback">Ingresa un correo válido.</div>
        </div>
        <div class="mb-3">
          <label for="passwordLogin" class="form-label">Contraseña:</label>
          <input type="password" id="passwordLogin" class="form-control" required minlength="4">
          <div class="invalid-feedback">Mínimo 4 caracteres.</div>
        </div>
        <button type="submit" class="btn btn-primary">Iniciar Sesión</button>
        <div class="d-flex justify-content-between mt-3">
          <a href="#">¿Olvidaste tu contraseña?</a>
          <a href="index.html">Registrarse</a>
        </div>
      </form>
    </div>
  </main>

  <footer>
    <p class="mb-0">© 2025 Evalix. Todos los derechos reservados.</p>
    <small><a href="#">Políticas de privacidad</a> · <a href="#">Términos y condiciones</a></small>
  </footer>

<script>
/* ------------------------------
   JS con Array, DOM, Fetch y Asincronía
--------------------------------*/
document.addEventListener("DOMContentLoaded", async () => {
  const selectTipo = document.getElementById("tipoCliente");
  const form = document.getElementById("loginForm");

  // Array con los tipos de cliente
  const tiposCliente = [
    { id: 1, valor: "administrativo", nombre: "Administrativo" },
    { id: 2, valor: "profesor", nombre: "Profesor" },
    { id: 3, valor: "alumno", nombre: "Alumno" }
  ];

  // Simulamos fetch asíncrono
  const fetchTipos = async () => {
    return new Promise(resolve => setTimeout(() => resolve(tiposCliente), 300));
  };

  try {
    const data = await fetchTipos();
    // ✅ Cambio aplicado: "Administrativo" seleccionado por defecto
    selectTipo.innerHTML = data
      .map(tipo => `<option value="${tipo.valor}" ${tipo.valor === "administrativo" ? "selected" : ""}>${tipo.nombre}</option>`)
      .join('');
  } catch (err) {
    console.error("Error al cargar tipos:", err);
  }

  // Manejo del envío del formulario
  form.addEventListener("submit", e => {
    e.preventDefault();
    if (!form.checkValidity()) {
      form.classList.add("was-validated");
      return;
    }

    const email = document.getElementById("emailLogin").value.trim();
    const tipo = selectTipo.value;
    const userData = { email, tipo, loggedAt: new Date().toISOString() };

    localStorage.setItem("evalix_user", JSON.stringify(userData));

    // Redirección según el tipo de usuario
    if (tipo === "profesor") {
      window.location.href = "docente.html";
    } else if (tipo === "administrativo") {
      window.location.href = "administrativo.html";
    } else if (tipo === "alumno") {
      window.location.href = "estudiante.html";
    } else {
      alert("Selecciona un tipo de usuario válido.");
    }
  });
});
</script>
</body>
</html>
